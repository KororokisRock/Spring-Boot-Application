Bank Cards Management API - Полное описание Endpoints

Группа: Аутентификация и токены

POST /auth/sing-in

Роль: Доступно без аутентификации
Описание: Аутентификация пользователя в системе и получение JWT токенов
Тело запроса (UserCredentialsDTO):

· username: string (обязательно, 2-50 символов) - имя пользователя
· password: string (обязательно, минимум 3 символа) - пароль пользователя

Пример curl:

curl -X POST "http://localhost:8080/auth/sing-in" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "Kororok",
    "password": "123"
  }'
Ответ:

{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
POST /auth/refresh

Роль: Доступно без аутентификации
Описание: Обновление access токена с использованием refresh токена
Тело запроса (RefreshTokenDTO):

· refreshToken: string (обязательно) - refresh токен, полученный при аутентификации

Пример curl:

curl -X POST "http://localhost:8080/auth/refresh" \
  -H "Content-Type: application/json" \
  -d '{
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }'
Ответ:

{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
Группа: Регистрация пользователей

POST /register

Роль: Доступно без аутентификации
Описание: Регистрация нового пользователя в системе
Тело запроса (RegistrationDTO):

· username: string (обязательно, 2-50 символов, уникальный) - имя пользователя
· password: string (обязательно, минимум 3 символа) - пароль
· passwordConfirm: string (обязательно) - подтверждение пароля, должно совпадать с password

Пример curl:

curl -X POST "http://localhost:8080/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "newuser",
    "password": "password123",
    "passwordConfirm": "password123"
  }'
Ответ:

"Registration complete"
Группа: Операции пользователей с картами

POST /card/show

Роль: ROLE_USER
Описание: Получение пагинированного списка карт текущего пользователя с маскированными номерами
Тело запроса (FilterPageCardDTO):

· username: string (опционально) - фильтр по имени пользователя
· directionSort: string (опционально, по умолчанию "asc") - направление сортировки: "asc" или "desc"
· sortBy: string (опционально, по умолчанию "id") - поле для сортировки: "id", "card_number", "owner_id", "validity_period", "status", "balance"
· page: integer (опционально, по умолчанию 0) - номер страницы (0-based)
· size: integer (опционально, по умолчанию 10) - размер страницы
· cardNumber: string (опционально) - фильтр по номеру карты (частичное совпадение)
· minEndDate: string (date, опционально) - минимальная дата истечения срока действия
· maxEndDate: string (date, опционально) - максимальная дата истечения срока действия
· status: string (опционально) - фильтр по статусу: "ACTIVE", "BLOCKED", "EXPIRED"
· minBalance: number (опционально) - минимальный баланс
· maxBalance: number (опционально) - максимальный баланс

Пример curl:

curl -X POST "http://localhost:8080/card/show" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "page": 0,
    "size": 10,
    "sortBy": "balance",
    "directionSort": "desc"
  }'
Ответ:

{
  "content": [
    {
      "id": 1,
      "cardNumber": "************3456",
      "ownerId": 1,
      "validityPeriod": "2025-12-31",
      "status": "ACTIVE",
      "balance": 2000.0
    }
  ],
  "currentPage": 0,
  "totalPages": 1,
  "totalItems": 1,
  "pageSize": 10,
  "hasNext": false,
  "hasPrevious": false
}
POST /card/show-full-number

Роль: ROLE_USER
Описание: Получение пагинированного списка карт текущего пользователя с полными номерами карт
Тело запроса (FilterPageCardDTO): (те же параметры что и для /card/show)

Пример curl:

curl -X POST "http://localhost:8080/card/show-full-number" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "page": 0,
    "size": 10
  }'
Ответ:
{
  "content": [
    {
      "id": 1,
      "cardNumber": "1234123412341234",
      "ownerId": 1,
      "validityPeriod": "2025-12-31",
      "status": "ACTIVE",
      "balance": 2000.0
    }
  ],
  "currentPage": 0,
  "totalPages": 1,
  "totalItems": 1,
  "pageSize": 10,
  "hasNext": false,
  "hasPrevious": false
}
POST /card/transfer

Роль: ROLE_USER
Описание: Перевод денежных средств между двумя картами, принадлежащими текущему пользователю
Тело запроса (TransferBetweenCardsDTO):

· firstCardNumber: string (обязательно, 16 цифр) - номер карты списания
· secondCardNumber: string (обязательно, 16 цифр) - номер карты зачисления
· amountTransferBetweenCards: number (обязательно, положительное число) - сумма перевода

Пример curl:

curl -X POST "http://localhost:8080/card/transfer" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{
    "firstCardNumber": "1234123412341234",
    "secondCardNumber": "9876987698769876",
    "amountTransferBetweenCards": 100.0
  }'
Ответ:

"Transfer between cards completed successfully"
Группа: Административные операции с пользователями

GET /user/all

Роль: ROLE_ADMIN
Описание: Получение списка всех зарегистрированных пользователей в системе
Тело запроса: отсутствует

Пример curl:

curl -X GET "http://localhost:8080/user/all" \
  -H "Authorization: Bearer <admin_token>"
Ответ:

[
  {
    "id": 1,
    "username": "Kororok",
    "role": "ROLE_ADMIN"
  },
  {
    "id": 2,
    "username": "max",
    "role": "ROLE_USER"
  }
]
POST /user/delete

Роль: ROLE_ADMIN
Описание: Удаление пользователя из системы по имени пользователя
Тело запроса (UsernameDTO):

· username: string (обязательно, 2-50 символов) - имя пользователя для удаления

Пример curl:

curl -X POST "http://localhost:8080/user/delete" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <admin_token>" \
  -d '{
    "username": "username_to_delete"
  }'
Ответ:

"User delete successfully"
Группа: Административные операции с картами

GET /card/all

Роль: ROLE_ADMIN
Описание: Получение пагинированного списка всех карт в системе с возможностью фильтрации
Параметры запроса (в query string):

· username: string (опционально)
· directionSort: string (опционально)
· sortBy: string (опционально)
· page: integer (опционально)
· size: integer (опционально)
· cardNumber: string (опционально)
· minEndDate: string (опционально)
· maxEndDate: string (опционально)
· status: string (опционально)
· minBalance: number (опционально)
· maxBalance: number (опционально)

Пример curl:

curl -X GET "http://localhost:8080/card/all?page=0&size=10&sortBy=balance&directionSort=desc" \
  -H "Authorization: Bearer <admin_token>"
Ответ:

{
  "content": [
    {
      "id": 1,
      "cardNumber": "1234123412341234",
      "ownerId": 1,
      "validityPeriod": "2025-12-31",
      "status": "ACTIVE",
      "balance": 2000.0
    },
    {
      "id": 2,
      "cardNumber": "9876987698769876",
      "ownerId": 2,
      "validityPeriod": "2025-12-31",
      "status": "ACTIVE",
      "balance": 1000.0
    }
  ],
  "currentPage": 0,
  "totalPages": 1,
  "totalItems": 2,
  "pageSize": 10,
  "hasNext": false,
  "hasPrevious": false
}
POST /card/add

Роль: ROLE_ADMIN
Описание: Создание новой банковской карты для указанного пользователя
Тело запроса (NewCardDTO):

· cardNumber: string (обязательно, 16 цифр, уникальный) - номер карты
· ownerId: integer (обязательно, положительное число) - ID владельца карты
· validityPeriod: string (обязательно, date, будущая дата) - срок действия карты
· balance: number (опционально, по умолчанию 0.0, неотрицательное) - начальный баланс

Пример curl:

curl -X POST "http://localhost:8080/card/add" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <admin_token>" \
  -d '{
    "cardNumber": "1111222233334444",
    "ownerId": 2,
    "validityPeriod": "2026-12-31",
    "balance": 500.0
  }'
Ответ:

"Card added"


POST /card/block

Роль: ROLE_ADMIN
Описание: Блокировка банковской карты (изменение статуса на BLOCKED)
Тело запроса (CardNumberDTO):

· cardNumber: string (обязательно, 16 цифр) - номер карты для блокировки

Пример curl:

curl -X POST "http://localhost:8080/card/block" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <admin_token>" \
  -d '{
    "cardNumber": "1234123412341234"
  }'
Ответ:

"Card blocked"
POST /card/activate

Роль: ROLE_ADMIN
Описание: Активация банковской карты (изменение статуса на ACTIVE)
Тело запроса (CardNumberDTO):

· cardNumber: string (обязательно, 16 цифр) - номер карты для активации

Пример curl:

curl -X POST "http://localhost:8080/card/activate" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <admin_token>" \
  -d '{
    "cardNumber": "1234123412341234"
  }'
Ответ:

"Card activated"
POST /card/delete

Роль: ROLE_ADMIN
Описание: Удаление банковской карты из системы
Тело запроса (CardNumberDTO):

· cardNumber: string (обязательно, 16 цифр) - номер карты для удаления

Пример curl:

curl -X POST "http://localhost:8080/card/delete" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <admin_token>" \
  -d '{
    "cardNumber": "1234123412341234"
  }'
Ответ:

"Card deleted"